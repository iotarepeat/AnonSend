<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Upload Success</title>
    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static "js/bootstrap.bundle.js" %}"></script>
    <script src="{% static "js/qrcode.min.js" %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">

</head>

<body class="container-login100 d-block ">

{% include 'header.html' %}

<div class="container-fluid d-flex">

    <div class="wrap-login100 fadeInLeft mx-auto" style="animation-duration: 1s">
        <div class="login100-pic js-tilt mt-0" data-tilt>
            <img src="{% static "images/mobile_testing.svg" %}" alt="Public Link Image">
        </div>
        <div class="login100-form">
            <span class="login100-form-title">Public Link </span>
            <p>This is the public link for your files.<strong>The other person must
                require
                this to be
                able download your file(s)</strong>. It remains active for the specified amount of time and
                number
                of downloads.If you have set a password, the opposing person must submit the same password
                before
                they are allowed to download the file(s).
            </p>
            <label for="public"></label>

            <div class="d-flex">
                <input readonly class="form-control p-2 m-2 w-75" id="public"
                       value="http://127.0.0.1:8000/p/{{ public_link }}" onclick="this.select();"
                />

                <img class="my-3" alt="Copy to clipboard" onclick="copy_to_clipboard('public')"
                     src="{% static "images/clippy.svg" %}" style="width: 30px;height:30px"
                     title="Copy to clipboard">
                <img class="my-3 ml-1"
                     alt="Show QR"
                     title="QR Code"
                     src="{% static "images/qr.svg" %}"
                     style="width: 30px;height:30px"
                     data-toggle="popover"
                     data-content="
                            <div id='qr_pub' style=''></div>
                            <script>
                                      new QRCode(document.getElementById('qr_pub'), 'http://127.0.0.1:8000/{{ public_link }}');
                            </script>"
                />

            </div>
        </div>
    </div>

</div>

<hr class="bg-light"/>
<div class="container-fluid d-flex ">
    <div class="wrap-login100 fadeInRight mx-auto" style="animation-duration: 1s">
        <div class="login100-pic js-tilt" data-tilt>
            <img src="{% static "images/all_the_data.svg" %}"
                 alt="Analytic link image"/>
        </div>
        <div class="login100-form">
            <span class="login100-form-title">Analytic Link </span>
            <p>
                This is the analytic link. You can use this link to view a dashboard that displays various
                statistics corresponding to the public link. Statistics collected include device type,
                country,
                time
                of download and much more.<strong>The other person need not require this link</strong> to
                download
                the files. Your analytic link will expire after the time period you specified during
                uploading
                the
                file(s).
            </p>
            <label for="analytic"></label>
            <div class="d-flex">

                <input readonly
                       class="form-control p-2 m-2 w-75"
                       id="analytic" value="http://127.0.0.1:8000/analytics/{{ analytic_link }}"
                       onclick="this.select();"
                />
                <img src="{% static "images/clippy.svg" %}"
                     class="my-3"
                     style="width: 30px;height:30px"
                     title="Copy to clipboard"
                     onclick="copy_to_clipboard('analytic');"
                     alt="Copy to clipboard"/>

                <img class="my-3 ml-1"
                     alt="Show QR"
                     title="QR Code"
                     src="{% static "images/qr.svg" %}"
                     style="width: 30px;height:30px"
                     data-toggle="popover"
                     data-content="
                        <div id='qr_analytic' style=''></div>
                        <script>
                        new QRCode(document.getElementById('qr_analytic'), 'http://127.0.0.1:8000/analytics/{{ analytic_link }}');
                      </script>"
                />
            </div>
        </div>
    </div>
</div>


</body>
<script>
    $(function () {
        $('[data-toggle="popover"]').popover({
            html: true,
        })
    });

    function copy_to_clipboard(btn_type) {
        let text = document.getElementById(btn_type);
        text.select();
        document.execCommand("copy");
    }
</script>

<script src="{% static 'js/tilt.jquery.min.js' %}"> $('.js-tilt').tilt({
    reset: false, scale: 1.1
})
</script>

</html>
